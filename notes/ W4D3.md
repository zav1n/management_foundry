- 如何内联汇编修改 Owner 地址？
- 如何修改质押结构来节省Gas？
- 如何不通过合约调⽤查询ERC20持仓余额


这张图展示了以太坊的核心数据结构，尤其是与状态和交易存储相关的树形结构。我们可以从图中看出几个重要的部分：

1. 区块 (Block)：
区块包含了区块头 (Header) 和区块体 (Body)。

- Header (区块头)：包含一些基本的区块元数据，比如 parentHash（父区块的哈希）、ommersHash（叔块的哈希）、stateRoot（世界状态树的根哈希）、receiptsRoot（收据树的根哈希）、transactionRoot（交易树的根哈希）、logsBloom（日志布隆过滤器）、difficulty（难度）、number（区块高度）、gasLimit、gasUsed、timestamp（时间戳）等。

- Body (区块体)：包含交易列表（List of Transactions）和叔块（ommers）的列表。

2. 世界状态树 (World State Trie)：
世界状态树记录了以太坊网络中所有账户的状态，它是一个默克尔-帕特里夏树，根哈希值被保存在区块头的 stateRoot 字段中。

- 每个账户在世界状态树中都有一个状态节点，包含 nonce（账户发起的交易数或合约的创建数）、balance（账户余额）、storageRoot（账户存储树的根哈希）、codeHash（代码的哈希，适用于智能合约账户）。

- 通过 stateRoot，可以验证每个账户的状态。

3. 账户存储树 (Account Storage Trie)：
每个智能合约账户都有一个独立的存储树，用来存储该合约的变量和数据，树的根哈希保存在账户的 storageRoot 字段中。

- 这个树结构主要用于存储和读取合约内部的数据。

- 账户存储树也采用默克尔-帕特里夏树结构，以确保数据的完整性和不可篡改性。

4. 交易树 (Transactions Trie)：
每个区块都有一个交易树，记录了该区块中所有的交易。

- 交易树是一个默克尔-帕特里夏树，树的根哈希保存在区块头的 transactionRoot 字段中。

- 每个交易记录包含 nonce（交易序号）、gasPrice（燃气价格）、gasLimit（燃气限制）、to（接收方地址）、value（发送的以太币数量）、v, r, s（签名参数）、data（交易数据）等。

5. 收据树 (Receipts Trie)：
收据树保存了每笔交易执行后的收据信息，例如事件日志和状态变化。

- 树的根哈希保存在区块头的 receiptsRoot 字段中。
- 每条收据包含了交易执行的状态、使用的 gas 量、生成的日志等信息，便于验证交易的执行结果。

### 总结
这张图展示了以太坊通过默克尔-帕特里夏树来存储和验证链上状态的机制：

- 世界状态树、交易树、收据树都是独立的默克尔-帕特里夏树结构，它们的根哈希被记录在区块头中，确保数据的一致性和不可篡改性。

- 每个智能合约账户有自己的存储树，使得合约数据结构化存储。

- 通过区块头中这些树的根哈希，可以快速验证各个树的完整性和数据的真实性。